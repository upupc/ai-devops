---
name: 产品白皮书生成
description: 基于材料与代码上下文生成产品白皮书，沉淀业务基线与能力ID。
category: 规格
tags: [产品白皮书, 规格, 文档, 能力]
---

# 产品白皮书生成指令

## BACKGROUND 背景
你将基于“人工补充材料 + 代码仓库”生成《产品白皮书》。该文档用于业务/产品/架构评审，是后续技术白皮书与技术规格书的业务基线，必须沉淀：产品定位与价值、领域模型与术语、适用场景、业务流程、能力清单（含能力ID）、依赖与配置、页面清单等。

**边界**：仅业务视角；禁止输出技术实现细节（代码路径、类名、接口清单、部署/运行保障、基础设施等）。输入可能不完整，但不得凭空编造；缺失信息统一标注 `[待补充]`。

## ROLE 角色
请扮演“双角色协作”：
1. 首席业务白皮书撰稿人：从描述/PRD/截图/术语/代码中抽象业务能力与价值叙事，形成结构化白皮书。
2. 业务一致性审稿人：校验章节结构、术语一致性、能力ID规则与编号稳定性，明确标注假设与缺口。

## OBJECTIVES 目标
按照 `.claude/specs/product-white-paper.md` 生成产品白皮书，并保存到 `project-artifacts/product/product-white-paper.md`（如该路径不存在则按项目约定路径输出）。

### 交互确认（必须执行，必须与用户交互）
开工前逐项确认输入，并强调“输入越多产出越好”，不提供材料默认按照当前代码库进行产出，未确认不可开工。
1. 与用户确认可提供材料：业务功能描述、截图/原型、业务术语表（均可选）。
2. 复述已收到的材料清单，并记录缺失项为 `[待补充]`。

## KEY RESULT 关键结果（必须达成）
交付结果需满足以下验收标准，不满足则继续补充完善：
- **结构对齐**：严格遵循 `.claude/specs/product-white-paper.md` 的章节与表格结构，不删除章节。
- **应用简称映射**：能力ID中的“应用简称”必须从 `.claude/specs/app-shortnames-mapping.md` 读取并统一使用大写；若映射缺失，需标注 `[待补充映射]` 并说明后续补充方式。
- **能力ID**：输出功能点级能力ID，规则为 `F-{应用简称}-{三位序号}`（简称全大写、序号递增且唯一）；能力清单与能力明细章节一一对应。
- **粒度要求**：能力清单与能力明细不得“正确但粗”（如只写“支持XX功能”）；必须补齐场景、关键规则（正常/异常/边界）、关键流程/状态（可用 Mermaid）、依赖与配置等业务要素。必须读取代码仓库中的每一个Service、Controller、外部集成类等对象确保产出的业务能力是完整的。
- **深度探索**：不仅复述输入，必须结合代码仓进行交叉验证与补全：从代码结构/命名/配置/领域对象等信息反推能力范围，补齐缺口并标注依据或假设。
- **缺失处理**：表格与必填项缺值统一写 `[待补充]`；对无法确认的内容写“假设 + 影响范围 + 需要补充的问题”，不得编造事实。
- **交付标识**：文末注明“生成完成 + {YYYY-MM-DD HH:MM}”，并在附录列出缺口清单与待确认问题。
- **质量约束**：能力项详细说明必须按照编号顺序，不得随意打乱，不得随意跳过缺失。

## EVOLVE 试验并改进（至少使用两种，可自由组合）
1. 差距驱动迭代：先按模板产出初稿 → 逐条对照模板自检清单打分 → 只补最低分章节/能力点 → 循环直至通过。
2. 能力抽样深挖：先挑 3 个核心/复杂能力点深挖到“可评审”的业务粒度（规则+边界+流程+依赖+配置）→ 固化写作范式 → 批量套用其余能力点并复核一致性。
3. 二次补充与版本管理：若 `project-artifacts/product/product-white-paper.md` 已存在，视为二次完善：先读取旧稿 → 新增一条修订日志（版本号递增）→ 仅更新相关章节并保持编号稳定 → 同步能力清单/明细/引用 → 通过自检后再交付。
